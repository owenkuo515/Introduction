var imgCut={shell:function(){var e="<img />",v={$imgAreaSelect:null},M={narrowDownPercent:0};return{init:function(g,t){g.addClass("Module_imgCut");var s=g.width(),u=g.height(),d=s,w=u;t.selectionWidthRatio&&t.selectionHeightRatio&&(d=t.selectionWidthRatio,w=t.selectionHeightRatio);var f=d+":"+w,m=$(e);g.html(m),m.on("load",function(){var t=m.width(),e=m.height();t<=s&&e<=u||(e/u<=t/s?(m.width(s),m.height(Math.floor(m.height()))):(m.height(u),m.width(Math.floor(m.width()))));var i,r,n,o,a=m.width(),h=m.height();a<t&&(M.narrowDownPercent=a/t);var l=a/d*w;if(l<=h)i=0,n=a,o=l+(r=(h-l)/2);else{var c=h/w*d;r=0,n=c+(i=(a-c)/2),o=h}v.$imgAreaSelect=m.imgAreaSelect({aspectRatio:f,handles:!0,instance:!0,parent:g,persistent:!0,x1:i,y1:r,x2:Math.floor(n)-1,y2:Math.floor(o)-1})}),m.attr("src",t.src)},getSelection:function(){return v.$imgAreaSelect.getSelection()},getNarrowDownPercent:function(){return M.narrowDownPercent}}}},Module_imgCut=imgCut.shell;